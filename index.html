<!-- <script type="text/javascript">
    $(document).ready(function () {
        //Disable cut copy paste
        $('body').bind('cut copy paste', function (e) {
            e.preventDefault();
        });

        //Disable mouse right click
        $("body").on("contextmenu", function (e) {
            return false;
        });
    }); -->
</script>
<!DOCTYPE html>

<body oncopy="return false" oncut="return false">
    <html lang="en">

    <head>
        <title>Guides MU-HARDCORE</title>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="author" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <script>
            fetch('libraries.html')
                .then(response => response.text())
                .then(data => {
                    document.head.insertAdjacentHTML('beforeend', data);
                })
                .catch(error => console.error('Fehler beim Laden der Libraries:', error));
        </script>


        <style>
            .loader {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #000;
                color: #fff;
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            }

            .hero {
                background: url(images/PNG/header-guides.jpg) center top no-repeat;
                background-size: cover;
                height: 100vh;
            }

            .hero .bg-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #0000006e;
                /* Dunkleres Overlay */
                z-index: 1;
            }

            .hero-text {
                position: relative;
                z-index: 2;
            }

            .hero-text h6 {
                color: white;
                /* Weiße Schriftfarbe für h6 */
            }

            .hero-text h1 {
                color: white;
                /* Weiße Schriftfarbe für h1 */
            }
        </style>


        <style>
            #autocomplete-results {

                max-height: 200px;
                overflow-y: auto;
                list-style: none;
                padding: 0;
                margin: 0;
                position: absolute;
                background: white;
                width: 500px;
                z-index: 1000;
            }

            #autocomplete-results li {
                padding: 8px;
                cursor: pointer;
            }

            #autocomplete-results li:hover {
                background: #eee;
            }

            #search-box {
                width: 300px;
                padding: 8px;
                font-size: 16px;
            }
        </style>

    </head>

    <body data-spy="scroll" data-target="#navbarNav" data-offset="50">

        <div class="loader">Loading...</div>

        <div id="navbar-container"></div>



        <section class="hero d-flex flex-column justify-content-center align-items-center" id="home">

            <div class="bg-overlay"></div>


            <div class="container">
                <div class="row">


                    <div class="col-lg-8 col-md-10 mx-auto col-12">
                        <div class="hero-text mt-5 text-center">
                            <img src="https://i.imgur.com/nmihhYQ.png" alt="MU HARDCORE!" style="margin-left: 00px;">


                            <input type="text" id="search-box" placeholder="Search..." autocomplete="off"
                                style="border: 3px solid yellow;" />
                            <ul id="autocomplete-results"></ul>

                            <h3 class="feature-title"
                                style="text-align: center;font-size: 40px;font-family: cinzel;font-weight: 800;color: #ffc436;text-shadow: 0 0 15px rgb(251 104 0);">
                                GUIDES SYSTEM</h3>
                            <p class="feature-p" style="color: #e0cdae;font-size: 20px;">WWW.MU-HARDCORE.COM</p>
                        </div>
                    </div>

                </div>

            </div>



        </section>

        <div id="footer-container"></div>



        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/aos.js"></script>
        <script src="js/smoothscroll.js"></script>
        <script src="js/custom.js"></script>
        <!-- jQuery laden -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- Schutz-Skript -->
        <!-- <script src="js/protection.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const loader = document.querySelector('.loader');
                fetch('libraries.html?v=' + new Date().getTime())
                    .then(response => response.text())
                    .then(data => {
                        document.head.insertAdjacentHTML('beforeend', data);
                        return fetch('navbar.html?v=' + new Date().getTime());
                    })
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById('navbar-container').innerHTML = data;
                        return fetch('footer.html?v=' + new Date().getTime()); // Load footer
                    })
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById('footer-container').innerHTML = data;
                        loader.style.display = 'none'; // Hide loading screen
                    })
                    .catch(error => console.error('Fehler beim Laden:', error));
            });
        </script>


        <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>

        <script>
            let fuse;
            let flatIndex = [];

            fetch('./configs/search-index.json') // adjust if your file is in another folder
                .then(res => res.json())
                .then(data => {
                    console.log(data);



                    // flatIndex = Object.entries(data).map(([pageKey, pageData]) => ({
                    //     title: pageData.title || '',
                    //     url: pageData.url,
                    //     content: pageData.content || '',
                    //     tags: pageData.tags || []
                    // }));

                    flatIndex = Object.entries(data).map(([pageKey, pageData]) => ({
                        title: (pageData.title || '').toLowerCase(),
                        url: (pageData.url || '').toLowerCase(),
                        content: (pageData.content || '').toLowerCase(),
                        tags: (pageData.tags || []).map(tag => tag.toLowerCase())
                    }));


                    fuse = new Fuse(flatIndex, {
                        // keys: ['content'],
                        keys: [
                            { name: 'title', weight: 0.7 },
                            { name: 'tags', weight: 0.2 },
                            { name: 'content', weight: 0.1 }
                        ],
                        threshold: 0.3,
                        minMatchCharLength: 1,
                        ignoreLocation: true,
                        includeMatches: true,
                        useExtendedSearch: true,
                        includeScore: true,

                    });

                });

            const searchBox = document.getElementById('search-box');
            const resultsList = document.getElementById('autocomplete-results');





            searchBox.addEventListener('input', () => {
                const query = searchBox.value.trim().toLowerCase();
                resultsList.innerHTML = '';
                if (!query || !fuse) return;

                const exactResults = flatIndex.filter(item =>
                    item.title.includes(query) ||
                    item.tags.some(tag => tag.includes(query))
                );

                const fuzzyResults = fuse.search(query).slice(0, 20); // keep top 20

                //                 const rawResults = fuse.search(query);
                // rawResults.forEach(result => {
                //     console.log(`Matched: ${result.item.url} | Score: ${result.score}`);
                // });



                const combined = [...exactResults.map(item => ({ item })), ...fuzzyResults];

                const seen = new Set();
                const finalResults = combined.filter(res => {
                    const id = res.item.url;
                    if (seen.has(id)) return false;
                    seen.add(id);
                    return true;
                }).slice(0, 12);

                finalResults.forEach(result => {
                    const li = document.createElement('li');
                    const snippet = result.item.content.slice(0, 150).replace(/\s+/g, ' ') + '...';
                    li.textContent = `${result.item.url} - ${snippet}`;

                    // const sectionIdMap = {
                    //     "information": "info",
                    //     "wings 1": "1",
                    //     "wings 2": "2",
                    //     "wings 2.5": "2.5",
                    //     "wings 3": "3",
                    //     "wings 4": "4",
                    //     "wings 5": "5"
                    // };


                    const sectionMapByPage = {
                        "wings.html": {
                            "information": "info",
                            "wings 1": "1",
                            "wings 2": "2",
                            "wings 2.5": "2.5",
                            "wings 3": "3",
                            "wings 4": "4",
                            "wings 5": "5"
                        },
                        "boxes.html": {
                            "golden invasion": "goldens",
                            "monster farm": "farm",
                            "winged": "winged",
                            "hardboxes": "hardbox",
                            "blood castle": "bc",
                            "chaos castle": "cc",
                            "kalima": "kalima",
                            "weapon": "weapon",
                            "excellent weapon": "exeweapon",
                            "white wizard": "ww",
                            "skill": "skill",
                            "christmas": "christmas",
                            "evolution": "evolution",
                            "dota": "dota",
                            "dragon": "dragon"
                        },
                        "pets.html": {
                            "information": "info",
                            "damage": "damage",
                            "defense": "defense",
                            "mix": "mix",
                            "horse": "horse",
                            "farm": "farm"
                        },

                        "jewels.html": {
                            "information": "info",
                            "upgrade": "upgrade",
                            "jewel of daedalus": "daedalus",
                            "earrings": "earrings"
                        },
                        "customjewels.html": {
                            "information": "info",
                            "upgrade": "upgrade",
                            "wings": "wings",
                            "jewel of daedalus": "daedalus",
                            "pet": "pet"
                        },

                        "skills.html": {
                            "information": "info",
                            "dark wizard": "dw",
                            "dark knight": "dk",
                            "fairy elf": "elf",
                            "summoner": "sum",
                            "rage fighter": "rf",
                            "magic gladiator": "mg",
                            "dark lord": "dl"
                        },
                        "invasions.html": {
                            "information": "info",
                            "farm": "farm",
                            "golden": "golden",
                            "goblin": "goblin",
                            "white wizard": "ww",
                            "king": "king",
                            "lorencia warrior": "warrior",
                            "pet": "pet",
                            "feather": "feather",
                            "weapon": "weapon",
                            "kalima": "kalima",
                            "skill": "skill",
                            "skills": "skill",        // alternate for plural
                            "christmas": "christmas",
                            "evolution": "evolution",
                            "dota": "dota",
                            "dragon": "dragon",
                            "summon dragon": "sdragon"
                        },
                        "events.html": {
                            "information": "info",
                            "blood castle": "bc",
                            "devil square": "ds",
                            "chaos castle": "cc",
                            "kanturu event": "maya",
                            "crywolf event": "balgass",
                            "imperial guardian": "ig",
                            "double goer": "dg",
                            "pandora": "pandora",
                            "killall": "killall",
                            "castle siege": "cs"
                        },
                        "characters.html": {
                            "information": "information",
                            "dark wizard": "darkwizard",
                            "fairy elf": "fairyelf",
                            "dragon knight": "dragonknight",
                            "summoner": "summoner",
                            "rage fighter": "ragefighter",
                            "magic gladiator": "magicgladiator",
                            "dark lord": "darklord"
                        },
                        "maps.html": {
                            "information": "info",
                            "lorencia": "lorencia",
                            "noria": "noria",
                            "devias": "devias",
                            "dungeon": "dungeon",
                            "atlans": "atlans",
                            "tarkan": "tarkan",
                            "aida": "aida",
                            "kalima": "kalima",
                            "icarus": "icarus",
                            "kanturu ruins": "kantururuins",
                            "kanturu underground": "kanturuunderground",
                            "kanturu relics": "kantururelics",
                            "raklion": "raklion",
                            "crywolf": "crywolf",
                            "barraks of balgas": "baraks",
                            "karutan": "karutan",
                            "swamp of peace": "swamp",
                            "gray aida": "grayaida",
                            "nixies lake": "nixis",
                            "ferea": "ferea",
                            "deep dungeon": "deep",
                            "swamp of darkness": "swampofdarkness",
                            "atlans abbys": "atlansabbys"
                        },



                        "game.html": {
                            "information": "info",
                            "quest": "quest",
                            "market": "market",
                            "market place": "market",
                            "battle pass": "battle",
                            "battle": "battle",
                            "hunt log": "hunt",
                            "hunt": "hunt",
                            "daily reward": "dailyreward",
                            "offattack": "offattack"
                        },

                        "actsystem.html": {
                            "information": "info",
                            "act 1": "1",
                            "act i": "1",
                            "act 2": "2",
                            "act ii": "2",
                            "act 3": "3",
                            "act iii": "3",
                            "act 4": "4",
                            "act iv": "4",
                            "act 5": "5",
                            "act v": "5"
                        },

                        "options-bonus.html": {
                            "information": "info",
                            "harmony": "harmony",
                            "380": "380",
                            "socket": "socket"
                        },

                        "achievements.html": {
                            "information": "info",
                            "my bonus": "mybonus",
                            "general": "general",
                            "monsters": "monsters",
                            "items": "items"
                        },

                        "classevolution.html": {
                            "information": "info",
                            "sebina the priest": "2",
                            "marlon": "220",
                            "3rd class": "3",
                            "third class": "3"
                        },


                        "quest.html": {
                            "information": "info",
                            "act i": "act1",
                            "act 1": "act1",
                            "act ii": "act2",
                            "act 2": "act2",
                            "act iii": "act3",
                            "act 3": "act3",
                            "act iv": "act4",
                            "act 4": "act4",
                            "act v": "act5",
                            "act 5": "act5",
                        },

                        "petsystem.html": {
                            "information": "info",
                            "damage": "damage",
                            "defense": "defense",
                            "mix": "mix",
                            "horse": "horse",
                            "farm": "farm"
                        },


                        "earrings.html": {
                            "information": "info",
                            "earrings": "damage"
                        },

                        "itemsbonus.html": {
                            "information": "info",
                            "wings": "wings",
                            "items": "items",
                            "weapons": "weapons"
                        },

                        "pvm.html": {
                            "information": "info",
                            "farm": "farm",
                            "feather": "feather",
                            "golden invasion": "goldens",
                            "kalima invasion": "kalima",
                            "world bosses": "world"
                        }
















                        // Add more pages here
                    };


                    li.addEventListener('click', () => {


                        const page = result.item.url.split('/').pop(); // extract like "wings.html"
                        const title = result.item.title.toLowerCase();
                        const sectionMap = sectionMapByPage[page] || {};


                        // 👇 FIX: match against full query instead of tags only
                        const queryValue = document.getElementById("search-box").value.toLowerCase();
                        const matchedKey = Object.keys(sectionMap).find(key => queryValue.includes(key));
                        const sectionId = matchedKey ? sectionMap[matchedKey] : null;

                        const finalQuery = sectionId ? `q=${encodeURIComponent(sectionId)}` : `q=${encodeURIComponent(title)}`;
                        window.location.href = `${result.item.url}?${finalQuery}`;





                        // const query = document.getElementById("search-box").value.toLowerCase();
                        // const tags = result.item.tags.map(t => t.toLowerCase());
                        // const matchedTag = tags.find(tag => query.includes(tag));
                        // const sectionId = matchedTag ? sectionIdMap[matchedTag] : null;
                        // const finalQuery = sectionId ? `q=${encodeURIComponent(sectionId)}` : `q=${encodeURIComponent(title)}`;
                        // window.location.href = `${result.item.url}?${finalQuery}`;
                    });

                    resultsList.appendChild(li);
                });
            });



            // Close results when clicking outside
            document.addEventListener('click', (e) => {
                if (!resultsList.contains(e.target) && e.target !== searchBox) {
                    resultsList.innerHTML = '';
                }
            });
        </script>


    </body>

    </html>